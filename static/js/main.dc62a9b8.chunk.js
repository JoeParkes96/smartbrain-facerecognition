(this["webpackJsonpsmartbrain-facerecognition"]=this["webpackJsonpsmartbrain-facerecognition"]||[]).push([[0],{205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);a(55),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(8),s=a(9),r=a(11),i=a(10),o=(a(56),a(0)),l=a.n(o),c=(a(58),function(e){var t=e.onInputChange,a=e.onSubmit;return l.a.createElement("div",{className:"image-link-submitter"},l.a.createElement("p",{className:"descriptive-text"},"Provide an image URL and I will detect the face"),l.a.createElement("div",{className:"input-section center"},l.a.createElement("div",{className:"form-wrapper center"},l.a.createElement("input",{type:"text",className:"image-link-input center",onChange:t}),l.a.createElement("button",{className:"image-submit-button center",onClick:a},"Submit"))))}),m=(a(59),a(51)),u=a.n(m),d=function(){return l.a.createElement("div",{className:"logo-container"},l.a.createElement("img",{src:u.a,alt:"logo",className:"logo-image"}))},p=(a(60),function(e){var t=e.onChangeRoute;return e.isSignedIn?l.a.createElement("nav",{className:"nav-bar"},l.a.createElement("button",{className:"nav-button",onClick:function(){return t("signIn")}},"Sign Out")):l.a.createElement("nav",{className:"nav-bar"},l.a.createElement("button",{className:"nav-button",onClick:function(){return t("signIn")}},"Sign In"),l.a.createElement("button",{className:"nav-button",onClick:function(){return t("register")}},"Register"))}),g=a(52),h=a.n(g),E=(a(205),function(e){var t=e.imageURL,a=e.box;return l.a.createElement("div",{className:"center"},l.a.createElement("div",{className:"image-container"},l.a.createElement("img",{id:"inputted-image",src:t,alt:"",className:"submitted-image"}),l.a.createElement("div",{className:"bounding-box",style:{top:a.topRow,right:a.rightCol,bottom:a.bottomRow,left:a.leftCol}})))}),v=a(24),f=(a(206),RegExp(/^(([^<>()[\].,;:\s@"]+(.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+.)+[^<>()[\].,;:\s@"]{2,})$/i)),b=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).onRegister=function(){s.validateForm(s.state.validationErrors)?fetch("https://immense-refuge-48530.herokuapp.com/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.state.name,email:s.state.email,password:s.state.password})}).then((function(e){return e.json()})).then((function(e){e.id&&(s.props.loadUser(e),s.props.onChangeRoute("home"))})).catch((function(e){return console.log(e)})):console.error("Invalid form")},s.onNameChange=function(e){s.validateInputChange(e)&&s.setState({name:e.target.value})},s.onEmailChange=function(e){s.validateInputChange(e)&&s.setState({email:e.target.value})},s.onPasswordChange=function(e){s.validateInputChange(e)&&s.setState({password:e.target.value})},s.validateInputChange=function(e){var t=e.target,a=t.name,n=t.value,r=s.state.validationErrors;switch(a){case"name":var i=n.length>=2;r.name.message=i?"":"Name must be 2 or more characters",r.name.display=!i;break;case"email":var o=f.test(n);r.email.message=o?"":"Email is not valid",r.email.display=!o;break;case"password":var l=n.length>=8;r.password.message=l?"":"Password must be 8 or more characters",r.password.display=!l;break;default:throw Error("Invlaid input type")}s.setState(Object(v.a)({errors:r},a,n))},s.validateForm=function(e){var t=!0;return""===s.state.name&&""===s.state.email&&""===s.state.password?t=!1:Object.values(e).forEach((function(e){e.message.length>0&&(t=!1)})),t},s.getInputStateClass=function(e){return e?"error":"hidden"},s.state={name:"",email:"",password:"",validationErrors:{name:{message:"",display:!1},email:{message:"",display:!1},password:{message:"",display:!1}}},s}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.validationErrors.name,t=this.state.validationErrors.email,a=this.state.validationErrors.password;return l.a.createElement("div",{className:"center"},l.a.createElement("div",{className:"form-container"},l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Register"),l.a.createElement("div",{className:"input-item"},l.a.createElement("label",{htmlFor:"name"},"Name"),l.a.createElement("input",{type:"text",id:"name",name:"name",onChange:this.onNameChange}),l.a.createElement("span",{className:this.getInputStateClass(e.display)},e.message)),l.a.createElement("div",{className:"input-item"},l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{type:"email",id:"email",name:"email",onChange:this.onEmailChange}),l.a.createElement("span",{className:this.getInputStateClass(t.display)},t.message)),l.a.createElement("div",{className:"input-item"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",id:"password",name:"password",onChange:this.onPasswordChange}),l.a.createElement("span",{className:this.getInputStateClass(a.display)},a.message)),l.a.createElement("div",null,l.a.createElement("button",{className:"register-button",type:"submit",onClick:this.onRegister},"Register")))))}}]),a}(o.Component),C=(a(207),RegExp(/^(([^<>()[\].,;:\s@"]+(.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+.)+[^<>()[\].,;:\s@"]{2,})$/i)),w=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).onEmailChange=function(e){s.validateInputChange(e)&&s.setState({email:e.target.value}),s.clearCredentialsErrorsState()},s.onPasswordChange=function(e){s.validateInputChange(e)&&s.setState({password:e.target.value}),s.clearCredentialsErrorsState()},s.onSubmit=function(){s.validateForm(s.state.validationErrors)?fetch("https://immense-refuge-48530.herokuapp.com/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.state.email,password:s.state.password})}).then((function(e){return e.json()})).then((function(e){s.handleSignInResponse(e)})).catch((function(e){return console.log(e)})):console.error("Invalid form")},s.handleSignInResponse=function(e){var t=s.state.credentialsErrors;"Incorrect credentials"===e?(t={message:"Email or password are incorrect",display:!0},s.setState({credentialsErrors:t})):e.id&&(s.clearCredentialsErrorsState(),s.setState({credentialsErrors:t}),s.props.loadUser(e),s.props.onChangeRoute("home"))},s.validateInputChange=function(e){var t=e.target,a=t.name,n=t.value,r=s.state.validationErrors;switch(a){case"email":var i=C.test(n);r.email.message=i?"":"Email is not valid",r.email.display=!i;break;case"password":var o=n.length>=8;r.password.message=o?"":"Password must be 8 or more characters",r.password.display=!o;break;default:throw Error("Invlaid input type")}s.setState(Object(v.a)({errors:r},a,n))},s.validateForm=function(e){var t=!0;return""===s.state.email||""===s.state.password?t=!1:Object.values(e).forEach((function(e){e.message.length>0&&(t=!1)})),t},s.getInputStateClass=function(e){return e?"error":"hidden"},s.clearCredentialsErrorsState=function(){var e=s.state.credentialsErrors;e={message:"",display:!1},s.setState({credentialsErrors:e})},s.state={email:"",password:"",credentialsErrors:{message:"",display:!1},validationErrors:{email:{message:"",display:!1},password:{message:"",display:!1}}},s}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.onChangeRoute,t=this.state.validationErrors.email,a=this.state.validationErrors.password,n=this.state.credentialsErrors;return l.a.createElement("div",{className:"center"},l.a.createElement("div",{className:"form-container"},l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Sign In"),l.a.createElement("div",{className:"input-item"},l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{type:"email",id:"email",name:"email",onChange:this.onEmailChange,required:!0}),l.a.createElement("span",{className:this.getInputStateClass(t.display)},t.message)),l.a.createElement("div",{className:"input-item"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",id:"password",name:"password",onChange:this.onPasswordChange,required:!0}),l.a.createElement("span",{className:this.getInputStateClass(a.display)},a.message)),l.a.createElement("div",{className:"submit-item"},l.a.createElement("button",{className:"sign-in-button",onClick:this.onSubmit},"Sign In"),l.a.createElement("span",{className:this.getInputStateClass(n.display)},n.message)),l.a.createElement("div",null,l.a.createElement("p",{className:"register",onClick:function(){return e("register")}},"Register")))))}}]),a}(o.Component),S=(a(208),function(e){var t=e.name,a=e.submissions;return l.a.createElement("div",{className:"user-rank-section"},l.a.createElement("p",{className:"descriptive-text"},"".concat(t,", your submission count is")),l.a.createElement("p",{className:"rank-number"},"".concat(a)))}),N={particles:{line_linked:{shadow:{enable:!0,color:"#FFBC81",blur:5}},number:{value:50,density:{enable:!0,value_area:800}}}},y={input:"",imageURL:"",box:{},route:"signIn",routes:["signIn","register","home"],isSignedIn:!1,user:{id:"",name:"",email:"",submissions:0,dateJoined:""}},I=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).loadUser=function(t){e.setState({user:{id:t.id,name:t.name,email:t.email,submissions:t.submissions,dateJoined:t.dateJoined}})},e.updateUserSubmissionCount=function(){fetch("https://immense-refuge-48530.herokuapp.com/image",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.state.user.id})}).then((function(e){return e.json()})).then((function(t){e.setState(Object.assign(e.state.user,{submissions:t}))})).catch((function(e){return console.log(e)}))},e.calculateFaceLocation=function(e){var t=e.outputs[0].data.regions[0].region_info.bounding_box,a=document.getElementById("inputted-image"),n=Number(a.width),s=Number(a.height);return{leftCol:t.left_col*n,topRow:t.top_row*s,rightCol:n-t.right_col*n,bottomRow:s-t.bottom_row*s}},e.onChangeRoute=function(t){if(!e.state.routes.includes(t))throw new Error("Invalid route");"signIn"===t?e.setState(y):"home"===t&&e.setState({isSignedIn:!0}),e.setState({route:t})},e.setBoxLocation=function(t){e.setState({box:t})},e.onInputChange=function(t){e.setState({input:t.target.value})},e.onImageSubmit=function(){e.setState({imageURL:e.state.input}),fetch("https://immense-refuge-48530.herokuapp.com/imageUrl",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e.state.input})}).then((function(e){return e.json()})).then((function(t){t&&(e.updateUserSubmissionCount(),e.setBoxLocation(e.calculateFaceLocation(t)))})).catch((function(e){return console.log(e)}))},e.state=y,e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isSignedIn,a=e.route,n=e.imageURL,s=e.box,r=e.user;return l.a.createElement("div",{className:"App"},l.a.createElement(h.a,{className:"particles-background",params:N}),l.a.createElement(p,{onChangeRoute:this.onChangeRoute,isSignedIn:t}),"home"===a?l.a.createElement(o.Fragment,null,l.a.createElement(d,null),l.a.createElement(S,{name:r.name,submissions:r.submissions}),l.a.createElement(c,{onInputChange:this.onInputChange,onSubmit:this.onImageSubmit}),l.a.createElement(E,{imageURL:n,box:s})):"signIn"===a?l.a.createElement(w,{onChangeRoute:this.onChangeRoute,loadUser:this.loadUser}):l.a.createElement(b,{onChangeRoute:this.onChangeRoute,loadUser:this.loadUser}))}}]),a}(o.Component),R=a(53);a.n(R).a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t,a){e.exports=a.p+"static/media/logo_transparent.0e13690a.png"},54:function(e,t,a){e.exports=a(212)},55:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){}},[[54,1,2]]]);
//# sourceMappingURL=main.dc62a9b8.chunk.js.map